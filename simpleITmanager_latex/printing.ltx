\documentclass[10pt,a4paper,english]{article}
\usepackage{babel}
\usepackage{ae}
\usepackage{aeguill}
\usepackage{shortvrb}
\usepackage[latin1]{inputenc}
\usepackage{tabularx}
\usepackage{longtable}
\setlength{\extrarowheight}{2pt}
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage{color}
\usepackage{multirow}
\usepackage{ifthen}
\usepackage[DIV12]{typearea}
% generated by Docutils <http://docutils.sourceforge.net/>
\newlength{\admonitionwidth}
\setlength{\admonitionwidth}{0.9\textwidth}
\newlength{\docinfowidth}
\setlength{\docinfowidth}{0.9\textwidth}
\newlength{\locallinewidth}
\newcommand{\optionlistlabel}[1]{\bf #1 \hfill}
\newenvironment{optionlist}[1]
{\begin{list}{}
  {\setlength{\labelwidth}{#1}
   \setlength{\rightmargin}{1cm}
   \setlength{\leftmargin}{\rightmargin}
   \addtolength{\leftmargin}{\labelwidth}
   \addtolength{\leftmargin}{\labelsep}
   \renewcommand{\makelabel}{\optionlistlabel}}
}{\end{list}}
\newlength{\lineblockindentation}
\setlength{\lineblockindentation}{2.5em}
\newenvironment{lineblock}[1]
{\begin{list}{}
  {\setlength{\partopsep}{\parskip}
   \addtolength{\partopsep}{\baselineskip}
   \topsep0pt\itemsep0.15\baselineskip\parsep0pt
   \leftmargin#1}
 \raggedright}
{\end{list}}
% begin: floats for footnotes tweaking.
\setlength{\floatsep}{0.5em}
\setlength{\textfloatsep}{\fill}
\addtolength{\textfloatsep}{3em}
\renewcommand{\textfraction}{0.5}
\renewcommand{\topfraction}{0.5}
\renewcommand{\bottomfraction}{0.5}
\setcounter{totalnumber}{50}
\setcounter{topnumber}{50}
\setcounter{bottomnumber}{50}
% end floats for footnotes
% some commands, that could be overwritten in the style file.
\newcommand{\rubric}[1]{\subsection*{~\hfill {\it #1} \hfill ~}}
\newcommand{\titlereference}[1]{\textsl{#1}}
% end of "some commands"
\ifthenelse{\isundefined{\hypersetup}}{
\usepackage[colorlinks=true,linkcolor=blue,urlcolor=blue]{hyperref}
}{}
\title{Printing}
\author{}
\date{}
\hypersetup{
pdftitle={Printing}
}
\raggedbottom
\begin{document}
\maketitle

\setlength{\locallinewidth}{\linewidth}


%___________________________________________________________________________

\hypertarget{cups}{}
\pdfbookmark[0]{CUPS}{cups}
\section*{CUPS}
\label{cups}

A short history.


%___________________________________________________________________________

\hypertarget{overview}{}
\pdfbookmark[1]{Overview}{overview}
\subsection*{Overview}
\label{overview}

\href{http://www.cups.org/documentation.php/overview.html}{http://www.cups.org/documentation.php/overview.html}
\href{http://www.linuxfoundation.org/en/OpenPrinting/Database/CUPSDocumentation}{http://www.linuxfoundation.org/en/OpenPrinting/Database/CUPSDocumentation}


%___________________________________________________________________________

\hypertarget{installation-and-setup}{}
\pdfbookmark[1]{Installation and setup}{installation-and-setup}
\subsection*{Installation and setup}
\label{installation-and-setup}

use ports
run cupsd
\href{http://localhost:631/admin}{http://localhost:631/admin}

OK, some of the worst systems administration problems, the most frustrating times come fromt
trying to get ink onto paper.

We shall install CUPS on a USB conected printer. THen on a network enabled printer.
discuss the diffeences, and the secruity implicatons.


%___________________________________________________________________________

\hypertarget{ppd-file}{}
\pdfbookmark[0]{PPD file}{ppd-file}
\section*{PPD file}
\label{ppd-file}

I am using a Brother HL-5270DN printer, it is ethernet enabled and fast.
If I look up the PPD file at I find the entry easily and it says it works ``perfectly''

so a PPD file looks like
\begin{quote}{\ttfamily \raggedright \noindent
*PPD-Adobe:~"4.3"~\\
*{\%}~This~program~is~free~software;~you~can~redistribute~it~and/or~modify~it~\\
*{\%}~under~the~terms~of~the~GNU~General~Public~License~as~published~by~the~Free~\\
...~\\
*{\%}================================================~\\
*{\%}~~Copyright(C)~2005~Brother~Industries,~Ltd.~\\
*{\%}~~"Brother~HL-5270DN~BR-Script3"~\\
*{\%}================================================~\\
~\\
*{\%}====~General~Information~Keywords~========================~\\
*FormatVersion:~"4.3"~\\
*FileVersion:~"1.03"~\\
*LanguageEncoding:~ISOLatin1~\\
*LanguageVersion:~English~\\
*Manufacturer:~"Brother"~\\
...
}\end{quote}


%___________________________________________________________________________

\hypertarget{where-do-i-get-my-ppd-file-from}{}
\pdfbookmark[0]{Where do i get my PPD file from?}{where-do-i-get-my-ppd-file-from}
\section*{Where do i get my PPD file from?}
\label{where-do-i-get-my-ppd-file-from}

There is a list, maintained by volunteers of PPD files and the printers they work with (and how well they work) at
\href{http://www.linuxprinting.org/printer_list.cgi}{http://www.linuxprinting.org/printer{\_}list.cgi}


%___________________________________________________________________________

\hypertarget{using-command-line-printing}{}
\pdfbookmark[1]{Using command line printing}{using-command-line-printing}
\subsection*{Using command line printing}
\label{using-command-line-printing}

This should work
\begin{quote}

{\$} lpr -P Brother{\_}HL{\_}5270DN mytestfile.txt
\end{quote}

however there may be problems. The most common is that the old non CUPS printing software
is also named lp or lpr. and that they sit higher up {\$}PATH than the stuff CUPS installs
\begin{quote}

{\$} /usr/local/bin/lpr -P Brother{\_}HL{\_}5270DN resolv.conf
\end{quote}

if that works you just have a path problem.  It can be fixed on install of CUPS by XXX
Or you can move /usr/local/bin \emph{before} /usr/bin in your {\$}PATH\raisebox{.5em}[0em]{\scriptsize\hyperlink{id2}{1}}
Or force a replace of the old with a softlink to the new
\begin{quote}

{\$} ln -s /usr/local/bin/lpr /usr/bin/lpr
\end{quote}


%___________________________________________________________________________

\hypertarget{trouble-shooting}{}
\pdfbookmark[1]{trouble shooting}{trouble-shooting}
\subsection*{trouble shooting}
\label{trouble-shooting}
\newcounter{listcnt0}
\begin{list}{\arabic{listcnt0}.}
{
\usecounter{listcnt0}
\setlength{\rightmargin}{\leftmargin}
}
\item {} 
Unable to open device file ``/dev/ulpt0'': Permission denied

\end{list}

solution 1

\href{http://lists.freebsd.org/pipermail/freebsd-questions/2006-July/126232.html}{http://lists.freebsd.org/pipermail/freebsd-questions/2006-July/126232.html}

crw-{}-{}-{}-{}-{}-{}-  1 root  wheel       0,  78 May 19 19:07 ttyvf
crw-r-{}-r-{}-  1 root  operator    0,  80 May 19 19:19 ulpt0
crw-r-{}-r-{}-  1 root  operator    0,  81 May 19 19:07 unlpt0
lrwxr-xr-x  1 root  wheel            6 May 19 19:07 urandom -{\textgreater} random

solution 1

\href{http://lists.freebsd.org/pipermail/freebsd-questions/2006-July/126232.html}{http://lists.freebsd.org/pipermail/freebsd-questions/2006-July/126232.html}

The printer is a HL-1430 connected to USB and the error I got was: 'Unable to open USB device ``usb:/dev/unlpt0'' Permission Denied.'
Now I don't know if this is relevant in any way. After trying all kinds of solutions I finally decided to simply do ``chmod 777 /dev/unlpt0'', and that solved the problem.

results 1
Nope, it dod not complain, bt still sat there and did nothing

put the setup back
{\textgreater} chmod 0644 ulpt0

solutuon 2
Be sensible

The model number shows this is
HP LaserJet 1000W printer       Q1342A - end of life

Linuxprinting.org
\href{http://www.openprinting.org/show_printer.cgi?recnum=HP-LaserJet_1000}{http://www.openprinting.org/show{\_}printer.cgi?recnum=HP-LaserJet{\_}1000}

OK, This printer requires the foo2zjs printer driver.
This needs firmware loading up each boot.
This is going to get complicated

\href{http://foo2zjs.rkkda.com/}{http://foo2zjs.rkkda.com/}

OK - we download from there. (note on paypal request)
This asks us to run make (on freebsd we need gmake - its easy to tell - make fails horribly)

then reading INSTALL we need to get some more firmware files

it seems I need
\href{http://foo2zjs.rkkda.com/firmware/sihp1000.tar.gz}{http://foo2zjs.rkkda.com/firmware/sihp1000.tar.gz}

but the code assumes I have wget. It seemed easier to pkg{\_}add wget than check the code -
it seems to just untar it but...

OK


%___________________________________________________________________________

\hypertarget{hp-laserjet-1000-1005-1018-1020-p1005-p1006-p1505-notes}{}
\pdfbookmark[1]{HP LASERJET 1000/1005/1018/1020, P1005/P1006/P1505 NOTES}{hp-laserjet-1000-1005-1018-1020-p1005-p1006-p1505-notes}
\subsection*{HP LASERJET 1000/1005/1018/1020, P1005/P1006/P1505 NOTES}
\label{hp-laserjet-1000-1005-1018-1020-p1005-p1006-p1505-notes}
\begin{quote}

These printers need their firmware downloaded to them every time they
are powered up.
\begin{quote}
\begin{description}
\item[{On Linux with USB connected printer:}] \leavevmode 
If you are running Linux and the printer is connected via USB, you
can arrange for the firmware to be automatically downloaded to the
printer by performing one more installation step:

{\#} make install-hotplug

Unplug and re-plug the USB printer.

\end{description}

On another OS or with a parallel port connected printer:
\begin{quote}

You must send a firmware file to the printer each time you power it
up.  If you downloaded the extra files for the HP above, a typical
command line to load the firmware would be ONE of these:
\end{quote}
\end{quote}
\end{quote}
\begin{description}
\item[{==={\textgreater}            cat /usr/share/foo2zjs/firmware/sihp1000.dl {\textgreater} /dev/usb/lp0}] \leavevmode 
cat /usr/share/foo2zjs/firmware/sihp1005.dl {\textgreater} /dev/usb/lp0
cat /usr/share/foo2zjs/firmware/sihp1018.dl {\textgreater} /dev/usb/lp0
cat /usr/share/foo2zjs/firmware/sihp1020.dl {\textgreater} /dev/usb/lp0
cat /usr/share/foo2xqx/firmware/sihpP1005.dl {\textgreater} /dev/usb/lp0

\end{description}

problem 3
manhattan{\#} cat /usr/share/foo2zjs/firmware/sihp1000.dl {\textgreater} /dev/ulpt0
cat: stdout: Input/output error

OK -
\href{http://foo2zjs.rkkda.com/forum/read.php?12,605,605}{http://foo2zjs.rkkda.com/forum/read.php?12,605,605}

first you should build the kernel without ulpt driver.
then you should get foo2zjs and follow the instructions in the readme file. if you'll have any questions - report me!

ok - rebuild the kernel
in /usr/src/sys/i386/conf is GENERIC a file telng make how to build the kernel and what to leave ut. Comment out ulpt
rebuid

OK -
cat /usr/share/foo2zjs/firmware/sihp1000.dl {\textgreater} /dev/ugen0.1

that actually did something - it wrote and the printer got excited.
However... cups does not see it...

OK - I give up - buy a parallel to ethernet adaptor
\begin{figure}[b]\hypertarget{id2}$^{1}$
From \href{http://www.freebsddiary.org/cups.php}{http://www.freebsddiary.org/cups.php}
\end{figure}

\end{document}
