\documentclass[10pt,a4paper,english]{article}
\usepackage{babel}
\usepackage{ae}
\usepackage{aeguill}
\usepackage{shortvrb}
\usepackage[latin1]{inputenc}
\usepackage{tabularx}
\usepackage{longtable}
\setlength{\extrarowheight}{2pt}
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage{color}
\usepackage{multirow}
\usepackage{ifthen}
\usepackage[DIV12]{typearea}
% generated by Docutils <http://docutils.sourceforge.net/>
\newlength{\admonitionwidth}
\setlength{\admonitionwidth}{0.9\textwidth}
\newlength{\docinfowidth}
\setlength{\docinfowidth}{0.9\textwidth}
\newlength{\locallinewidth}
\newcommand{\optionlistlabel}[1]{\bf #1 \hfill}
\newenvironment{optionlist}[1]
{\begin{list}{}
  {\setlength{\labelwidth}{#1}
   \setlength{\rightmargin}{1cm}
   \setlength{\leftmargin}{\rightmargin}
   \addtolength{\leftmargin}{\labelwidth}
   \addtolength{\leftmargin}{\labelsep}
   \renewcommand{\makelabel}{\optionlistlabel}}
}{\end{list}}
\newlength{\lineblockindentation}
\setlength{\lineblockindentation}{2.5em}
\newenvironment{lineblock}[1]
{\begin{list}{}
  {\setlength{\partopsep}{\parskip}
   \addtolength{\partopsep}{\baselineskip}
   \topsep0pt\itemsep0.15\baselineskip\parsep0pt
   \leftmargin#1}
 \raggedright}
{\end{list}}
% begin: floats for footnotes tweaking.
\setlength{\floatsep}{0.5em}
\setlength{\textfloatsep}{\fill}
\addtolength{\textfloatsep}{3em}
\renewcommand{\textfraction}{0.5}
\renewcommand{\topfraction}{0.5}
\renewcommand{\bottomfraction}{0.5}
\setcounter{totalnumber}{50}
\setcounter{topnumber}{50}
\setcounter{bottomnumber}{50}
% end floats for footnotes
% some commands, that could be overwritten in the style file.
\newcommand{\rubric}[1]{\subsection*{~\hfill {\it #1} \hfill ~}}
\newcommand{\titlereference}[1]{\textsl{#1}}
% end of "some commands"
\ifthenelse{\isundefined{\hypersetup}}{
\usepackage[colorlinks=true,linkcolor=blue,urlcolor=blue]{hyperref}
}{}
\title{Pauls notes on home freebsd}
\author{}
\date{}
\hypersetup{
pdftitle={Pauls notes on home freebsd}
}
\raggedbottom
\begin{document}
\maketitle

\setlength{\locallinewidth}{\linewidth}


%___________________________________________________________________________

\hypertarget{bloody-router}{}
\pdfbookmark[0]{bloody router}{bloody-router}
\section*{bloody router}
\label{bloody-router}

getting around my router.  It refuses active FTP and stuffs up
DNS caching so, install from CD as usual, but choose DHCP instead of fixed IP and
use passive FTP to download binaries


%___________________________________________________________________________

\hypertarget{install-process-from-boot-only-cd}{}
\pdfbookmark[0]{Install process from boot only CD}{install-process-from-boot-only-cd}
\section*{Install process from boot only CD}
\label{install-process-from-boot-only-cd}
\newcounter{listcnt0}
\begin{list}{\arabic{listcnt0}.}
{
\usecounter{listcnt0}
\setlength{\rightmargin}{\leftmargin}
}
\item {} 
boot from CD

\item {} 
choose appropriate settings, and install from FTP

\item {} 
CHoose passive FTP

\item {} 
choose DHCP so that my router will think this host exists

\item {} 
Now download from FTP sites a minimal install

\item {} 
port{\_}add -r cvsup-without-gui; rehash

\item {} 
``reply from unexpected source'' - some DNS resolutions will go out from my router
and then not be cached by the router, but will be sent direct to me from the external DNS
My machine will get worried by this (man in the middle ?).
THe way to fix is either try a diff URL or change /etc/resolv.conf after DHCP assigned

\item {} 
ports install and src install
use the ports supfiles as in the folder

\end{list}

{\$} make install sysutils/screen


%___________________________________________________________________________

\hypertarget{the-basics-from-now}{}
\pdfbookmark[0]{The basics from now}{the-basics-from-now}
\section*{The basics from now}
\label{the-basics-from-now}
\begin{itemize}
\item {} 
ports and src install

\item {} 
(re)BuildWorld

\item {} 
installing ports

\item {} 
upgrading ports

\item {} 
keeping track of what is there

\item {} 
Building X

\end{itemize}


%___________________________________________________________________________

\hypertarget{sysadmin-stuff}{}
\pdfbookmark[0]{Sysadmin stuff}{sysadmin-stuff}
\section*{Sysadmin stuff}
\label{sysadmin-stuff}
\begin{itemize}
\item {} 
backups

\item {} 
DNS

\item {} 
Email

\item {} 
Firewalls

\item {} 
web, cherrypy, wsgi,

\item {} 
mysql

\end{itemize}


%___________________________________________________________________________

\hypertarget{ports-and-src-install}{}
\pdfbookmark[0]{ports and src install}{ports-and-src-install}
\section*{ports and src install}
\label{ports-and-src-install}

using files in current folder

cvsup ports-supfile; cvsup src-supfile

THis should be run reguarly (daily?)


%___________________________________________________________________________

\hypertarget{re-buildworld}{}
\pdfbookmark[0]{(re)BuildWorld}{re-buildworld}
\section*{(re)BuildWorld}
\label{re-buildworld}

Why do we do this?:
\begin{quote}{\ttfamily \raggedright \noindent
"To~take~full~advantage~of~your~new~system~you~should~recompile~the~kernel.~This~is~practically~a~necessity,~as~certain~memory~structures~may~have~changed,~and~programs~like~ps(1)~and~top(1)~will~fail~to~work~until~the~kernel~and~source~code~versions~are~the~same."~\\
http://www.freebsd.org/doc/en{\_}US.ISO8859-1/books/handbook/makeworld.html
}\end{quote}

In short, if we change the src code, we will almost always need to change the kernel too.
So if we rebuild world, that is the FreeBSD specifically written stuff,
we will need to change the kernel too. It makes sense

1. Alter make.conf
NO{\_}PROFILE=    true    {\#}    Avoid compiling profiled libraries
\setcounter{listcnt0}{0}
\begin{list}{\arabic{listcnt0}.}
{
\usecounter{listcnt0}
\addtocounter{listcnt0}{1}
\setlength{\rightmargin}{\leftmargin}
}
\item {} 
make -j4 buildworld

\end{list}

{\#} cd /usr/src
{\#} make buildkernel KERNCONF=MYKERNEL
{\#} make installkernel KERNCONF=MYKERNEL

reboot (single user)

{\#} cd /usr/src
{\#} make installworld

mergemaster - I need more help on this. but take defaults for now. On a running system
a bit harder...maybe a thing that compares the defaults against my changes and new changes...


%___________________________________________________________________________

\hypertarget{keeping-track}{}
\pdfbookmark[0]{Keeping track}{keeping-track}
\section*{Keeping track}
\label{keeping-track}

WHat has changed with each cvsup?
- cvsup tells us, but knowing if it is important is anothr matter
- if it is in src/lib it is probably worth a rebuild...
- and of course we like to use Freebsd-stable instead.


%___________________________________________________________________________

\hypertarget{x11}{}
\pdfbookmark[1]{X11}{x11}
\subsection*{X11}
\label{x11}

/usr/ports/x11-fonts/ttmkfdir

fonts
C:WINDOWSFonts
http://www.freebsd.org/doc/en{\_}US.ISO8859-1/books/handbook/x-fonts.html
pscp {\color{red}\bfseries{}*}.ttf \href{mailto:root@192.168.1.11}{root@192.168.1.11}:/usr/local/lib/X11/fonts/TrueType/
add line to xorg.conf
FontPath ``/usr/X11R6/lib/X11/fonts/URW''
type 1 fonts make

Inline emphasis start-string without end-string.



%___________________________________________________________________________

\hypertarget{xdm}{}
\pdfbookmark[0]{XDM}{xdm}
\section*{XDM}
\label{xdm}
\begin{description}
\item[{can be set as a tty -}] \leavevmode 
ttyv8   ``/usr/local/bin/xdm -nodaemon''  xterm   off secure

\end{description}

config
\begin{quote}

usr/local/lib/X11/xdm
\end{quote}

windows mgr

\href{http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/x11-wm.html}{http://www.freebsd.org/doc/en{\_}US.ISO8859-1/books/handbook/x11-wm.html}
{\#} cd /usr/ports/x11-wm/xfce4
{\#} make install clean

{\%} echo ``/usr/local/bin/startxfce4'' {\textgreater} {\textasciitilde}/.xinitrc


%___________________________________________________________________________

\hypertarget{phone-line}{}
\pdfbookmark[0]{Phone Line}{phone-line}
\section*{Phone Line}
\label{phone-line}

Phone Line - ADSL Filter - DSL Modem - Ethernet Out - Own FIrewall/router - WIFI?

\href{http://www.broadbandbuyer.co.uk/Shop/ShopDetail.asp?ProductID=4122}{http://www.broadbandbuyer.co.uk/Shop/ShopDetail.asp?ProductID=4122}


%___________________________________________________________________________

\hypertarget{dns}{}
\pdfbookmark[1]{DNS}{dns}
\subsection*{DNS}
\label{dns}

BIND8 is installed by default
named{\_}enable=``YES''


%___________________________________________________________________________

\hypertarget{ntp}{}
\pdfbookmark[1]{NTP}{ntp}
\subsection*{NTP}
\label{ntp}


%___________________________________________________________________________

\hypertarget{ftp}{}
\pdfbookmark[1]{FTP}{ftp}
\subsection*{FTP}
\label{ftp}


%___________________________________________________________________________

\hypertarget{nfs}{}
\pdfbookmark[1]{NFS}{nfs}
\subsection*{NFS}
\label{nfs}

\end{document}
